CREATE DATABASE BOOK;
USE BOOK;
CREATE TABLE BORROWER (
	BID VARCHAR(5) PRIMARY KEY,
    BNAME VARCHAR(40) NOT NULL
);
INSERT INTO BORROWER (BID, BNAME) VALUES ('B001','RAMCHARAN DAS'), ('B002','KALICHARAN BOSE'), ('B003','SHYAMSUNDAR MAJHI'), ('B004','ADITYA SEN'), ('B005','ARPAN MITRA');
CREATE TABLE BOOK (
	BOOKID VARCHAR(5) PRIMARY KEY,
    TITLE VARCHAR(40) NOT NULL,
    AUTHOR VARCHAR(40) NOT NULL,
    SUBJECT VARCHAR(40) NOT NULL
);
INSERT INTO BOOK VALUES ('PY001','A BYTE OF PYTHON','SWAROOP C H','PYTHON');
INSERT INTO BOOK VALUES ('D001','DATABASE SYSTEM CONCEPTS','ABRAHAM SILBERSCHATZ','DBMS');
INSERT INTO BOOK VALUES ('PH001','DYNAMICAL SYSTEM AND CHAOS','RUI DILAO','PHYSICS');
INSERT INTO BOOK VALUES ('J001','EFFECTIVE JAVA','JOSHUA BLOCH','JAVA');
INSERT INTO BOOK VALUES ('PH002','EIGHT LECTURES ON THEORETICAL PHYSICS','MAX PLANCK','PHYSICS');
INSERT INTO BOOK VALUES ('PH003',"EINSTEIN'S FRIDGE",'PAUL SEN','PHYSICS');
INSERT INTO BOOK VALUES ('PH004','FEYNMAN INTEGRALS','STEFAN WEINZIERL','PHYSICS');
INSERT INTO BOOK VALUES ('PY002','FLUENT PYTHON','LUCIANO RAMALHO','PYTHON');
INSERT INTO BOOK VALUES ('D002','FUNDAMENTALS OF DBMS','S NAVATHE','DBMS');
INSERT INTO BOOK VALUES ('J002','HEAD FIRST JAVA','KATHY SIERRA & BERT BATES','JAVA');
INSERT INTO BOOK VALUES ('PY003','HEAD FIRST PYTHON','PAUL BARRY','PYTHON');
INSERT INTO BOOK VALUES ('D003','INTRODUCTION TO DBMS','KAHATE','DBMS');
INSERT INTO BOOK VALUES ('J003',"JAVA: A BEGINNER'S GUIDE",'HERBERT SCHILDT','JAVA');
INSERT INTO BOOK VALUES ('J004','JAVA FOR DUMMIES','BARRY A. BURD','JAVA');
INSERT INTO BOOK VALUES ('PY004','OBJECT-ORIENTED PYTHON','IRV KALB','PYTHON');
INSERT INTO BOOK VALUES ('D004','PRINCIPLES OF DBMS','J D ULLMAN','DBMS');
INSERT INTO BOOK VALUES ('PY005','PYTHON PROGRAMMINGS','ANTHONY BRUN','PYTHON');
INSERT INTO BOOK VALUES ('PH005','QUANTUM MECHANICS','TAPAN KUMAR DAS','PHYSICS');

CREATE TABLE BORROWS(
	BID VARCHAR(5) NOT NULL,
    BOOKID VARCHAR(5) NOT NULL,
    DATEOFISSUE DATE NOT NULL,
    DATEOFRETURN DATE,
    FOREIGN KEY(BID) REFERENCES BORROWER(BID),
    FOREIGN KEY(BOOKID) REFERENCES BOOK(BOOKID)
);
INSERT INTO BORROWS VALUES ('B002','PH002','2023-10-01','2023-10-18');
INSERT INTO BORROWS VALUES ('B003','D002','2023-09-05','2023-10-04');
INSERT INTO BORROWS VALUES ('B005','D001','2023-08-03','2023-10-09');
INSERT INTO BORROWS VALUES ('B003','PH004','2023-10-05','2023-10-20');
INSERT INTO BORROWS VALUES ('B005','PH004','2023-10-01','2023-10-13');
INSERT INTO BORROWS VALUES ('B005','J004','2023-10-16','2023-10-25');
INSERT INTO BORROWS VALUES ('B003','J003','2023-09-06','2023-10-02');
INSERT INTO BORROWS VALUES ('B002','PH005','2023-09-25','2023-10-04');
INSERT INTO BORROWS VALUES ('B002','PY004','2023-10-04','2023-10-21');
INSERT INTO BORROWS VALUES ('B005','PY005','2023-08-03','2023-10-16');

SELECT * FROM BOOK;
SELECT * FROM BORROWER;
SELECT * FROM BORROWS;

#LIST THE DETAILED INFORMATION OF ALL THE BOOKS OF PHYSICS & DBMS
SELECT * FROM BOOK WHERE SUBJECT='PHYSICS' OR SUBJECT='DBMS';

#LIST THE TITLE AND AUTHOR OF ALL THE BOOKS ISSUED BY THE BORROWER WHOSE BID='B005'
SELECT TITLE,AUTHOR FROM BORROWER,BOOK,BORROWS WHERE BORROWER.BID=BORROWS.BID AND BOOK.BOOKID=BORROWS.BOOKID AND BORROWS.BID='B005';

#LIST THE BORROWER IDS AND BORROWER NAMES WHO DID NOT BORROW ANY BOOK
SELECT BID,BNAME FROM BORROWER WHERE NOT EXISTS (SELECT BOOKID FROM BORROWS WHERE BORROWER.BID=BORROWS.BID);

#FIND THE TOTAL NUMBER OF BOOKS IN THE LIBRARY
SELECT COUNT(BOOKID) FROM BOOK;