CREATE DATABASE RESTAURANT;
USE RESTAURANT;
CREATE TABLE MENU(
	DISHNO VARCHAR(10) PRIMARY KEY,
    DISH_DESCRIPTION VARCHAR(40) NOT NULL,
    PRICE FLOAT NOT NULL
);
INSERT INTO MENU VALUES('D001','CHICKEN PAKORA',20.00);
INSERT INTO MENU VALUES('D002','CHICKEN SOUP',20.00);
INSERT INTO MENU VALUES('D003','FISH FRY',35.00);
INSERT INTO MENU VALUES('D004','GREEN SALAD',20.00);
INSERT INTO MENU VALUES('D005','FRIED RICE',80.00);
INSERT INTO MENU VALUES('D006','BOMBAY ALOO',40.00);
INSERT INTO MENU VALUES('D007','TANDOORI CHICKEN PRAWN',100.00);
INSERT INTO MENU VALUES('D008','FISH PATURI',100.00);
INSERT INTO MENU VALUES('D009','CHICKEN/MUTTON KOSHA',200.00);
INSERT INTO MENU VALUES('D010','CHUTNEY-PAPAD',40.00);
INSERT INTO MENU VALUES('D011','RAS MALAI',40.00);
INSERT INTO MENU VALUES('D012','ICE CREAM',40.00);
INSERT INTO MENU VALUES('D013','GULAB JAMUN',40.00);
INSERT INTO MENU VALUES('D014','PAAN',30.00);

CREATE TABLE BILL(
	BILLNO VARCHAR(10) PRIMARY KEY,
    BILLDATE DATE NOT NULL,
    TABLENO INT NOT NULL,
    WAITERNO VARCHAR(10) NOT NULL,
    TOTAL FLOAT NOT NULL
);
INSERT INTO BILL VALUES('B001','2023-12-16',4,'WA002',380.00);
INSERT INTO BILL VALUES('B002','2023-12-17',2,'WA001',650.00);
INSERT INTO BILL VALUES('B003','2023-12-16',5,'WA005',255.00);
INSERT INTO BILL VALUES('B004','2023-12-18',4,'WA005',270.00);
INSERT INTO BILL VALUES('B005','2023-12-18',3,'WA002',210.00);
INSERT INTO BILL VALUES('B006','2023-12-16',5,'WA004',270.00);
INSERT INTO BILL VALUES('B007','2023-12-17',1,'WA001',400.00);
INSERT INTO BILL VALUES('B008','2023-12-20',4,'WA005',190.00);
INSERT INTO BILL VALUES('B009','2023-12-18',5,'WA002',1100.00);
INSERT INTO BILL VALUES('B010','2023-12-23',4,'WA005',700.00);

CREATE TABLE FOOD_ORDER(
	BILLNO VARCHAR(10) REFERENCES BILL,
    DISHNO VARCHAR(10) REFERENCES MENU,
    QUANTITY INT NOT NULL,
    PRIMARY KEY(BILLNO, DISHNO)
);
INSERT INTO FOOD_ORDER (BILLNO, DISHNO, QUANTITY) VALUES('B001','D001',2), ('B001','D005',2), ('B001','D008',1), ('B001','D012',2);
INSERT INTO FOOD_ORDER (BILLNO, DISHNO, QUANTITY) VALUES('B002','D003',2), ('B002','D004',1), ('B002','D005',2), ('B002','D009',2);
INSERT INTO FOOD_ORDER (BILLNO, DISHNO, QUANTITY) VALUES('B003','D002',1), ('B003','D005',2), ('B003','D003',1), ('B003','D012',1);
INSERT INTO FOOD_ORDER (BILLNO, DISHNO, QUANTITY) VALUES('B004','D005',2), ('B004','D006',1), ('B004','D010',1), ('B004','D014',1);
INSERT INTO FOOD_ORDER (BILLNO, DISHNO, QUANTITY) VALUES('B005','D001',2), ('B005','D003',2), ('B005','D004',1), ('B005','D013',2);
INSERT INTO FOOD_ORDER (BILLNO, DISHNO, QUANTITY) VALUES('B006','D001',4), ('B006','D003',2), ('B006','D004',2), ('B006','D011',2);
INSERT INTO FOOD_ORDER (BILLNO, DISHNO, QUANTITY) VALUES('B007','D005',1), ('B007','D007',2), ('B007','D010',1), ('B007','D012',2);
INSERT INTO FOOD_ORDER (BILLNO, DISHNO, QUANTITY) VALUES('B008','D002',2), ('B008','D003',2), ('B008','D004',2), ('B008','D013',1);
INSERT INTO FOOD_ORDER (BILLNO, DISHNO, QUANTITY) VALUES('B009','D005',4), ('B009','D008',1), ('B009','D009',3), ('B009','D012',2);
INSERT INTO FOOD_ORDER (BILLNO, DISHNO, QUANTITY) VALUES('B010','D005',2), ('B010','D009',2), ('B010','D011',2), ('B010','D014',2);

SELECT * FROM MENU;
SELECT * FROM BILL;
SELECT * FROM FOOD_ORDER;

#FIND OUT TOTAL BILL AMOUNT IN EACH TABLE
SELECT TABLENO, SUM(TOTAL) AS "TOTAL BILL" FROM BILL GROUP BY TABLENO ORDER BY TABLENO ASC;

#FIND OUT THE PRICE FOR THE ITEM 'CHICKEN SOUP'
SELECT * FROM MENU WHERE DISH_DESCRIPTION='CHICKEN SOUP';

#FIND OUT BILL NO, BILL DATE, TOTAL AMOUNT FOR THE DATE '18TH DECEMBER 2023'
SELECT BILLNO, BILLDATE, TOTAL FROM BILL WHERE BILLDATE='2023-12-18';

#FIND OUT WHO HAVE ORDERED THE ITEM 'FISH FRY'
SELECT TABLENO, BILL.BILLNO, QUANTITY FROM MENU,BILL,FOOD_ORDER WHERE MENU.DISHNO=FOOD_ORDER.DISHNO AND FOOD_ORDER.BILLNO=BILL.BILLNO AND DISH_DESCRIPTION='FISH FRY' ORDER BY TABLENO ASC;
